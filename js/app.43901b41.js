(function(e){function t(t){for(var r,o,i=t[0],c=t[1],d=t[2],l=0,p=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,d||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={app:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("h1",[e._v("fx(sales)")]),e._m(0),a("address-input",{on:{clicked:e.addressEntered}}),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.salesMode,expression:"salesMode"}],attrs:{type:"radio",id:"secondary",value:"secondary"},domProps:{checked:e._q(e.salesMode,"secondary")},on:{change:function(t){e.salesMode="secondary"}}}),a("label",{attrs:{for:"secondary"}},[e._v("Secondary Sales")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.salesMode,expression:"salesMode"}],attrs:{type:"radio",id:"mints",value:"primary"},domProps:{checked:e._q(e.salesMode,"primary")},on:{change:function(t){e.salesMode="primary"}}}),a("label",{attrs:{for:"mints"}},[e._v("Mints(Primary Sales)")])]),a("div",[a("button",{on:{click:e.exportCSV}},[e._v("csv export")]),e._v(" "+e._s(e.loading)+" ")]),a("sales-table",{attrs:{type:e.salesMode,data:["secondary"==e.salesMode?{secondarySales:e.secondarySales}:{primarySales:e.primarySales}]}}),a("site-footer")],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" A tool to show secondary and primary sales on "),a("a",{attrs:{href:"https://www.fxhash.xyz/",target:"_blank"}},[e._v("fxhash")]),e._v(". ")])}],o=a("1da1"),i=(a("96cf"),a("4de4"),a("d3b7"),a("3ca3"),a("ddb0"),a("9861"),a("ac1f"),a("841c"),a("159b"),a("a15b"),a("d81d"),a("b0c0"),a("e9c4"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" Enter wallet address: "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.addr,expression:"addr"}],attrs:{type:"text"},domProps:{value:e.addr},on:{input:function(t){t.target.composing||(e.addr=t.target.value)}}}),a("button",{on:{click:e.search}},[e._v("go")])])}),c=[],d={name:"AddressInput",data:function(){return{addr:""}},methods:{search:function(){this.$emit("clicked",this.addr),window.history.replaceState(null,null,"?addr="+this.addr)}}},u=d,l=a("2877"),p=Object(l["a"])(u,i,c,!1,null,null,null),h=p.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("table",[a("tr",[a("td"),a("td",[e._v("Token Name")]),"primary"==e.type?a("td",[e._v("Amount Received")]):e._e(),"secondary"==e.type?a("td",[e._v("Sold for")]):e._e(),"secondary"==e.type?a("td",[e._v("Royalties"),a("br"),e._v("Received")]):e._e(),a("td",[e._v("Buyer")]),"secondary"==e.type?a("td",[e._v("Seller")]):e._e(),a("td",[e._v("Timestamp")])]),e._l(e.data[0][Object.keys(e.data[0])[0]],(function(t,r){return a("tr",{key:r},[a("td",[e._v(e._s(r+1))]),a("td",[a("a",{attrs:{href:"https://www.fxhash.xyz/objkt/"+t.objktID,target:"_blank"}},[e._v(" "+e._s(t.tokenName))])]),"primary"==e.type?a("td",[e._v(e._s(t.amount))]):e._e(),"secondary"==e.type?a("td",[e._v(e._s(t.soldPrice))]):e._e(),"secondary"==e.type?a("td",[e._v(e._s(t.amount))]):e._e(),a("td",[a("a",{attrs:{href:"https://tzkt.io/"+t.buyerAddress,target:"_blank"}},[e._v(e._s(t.buyerAlias||e.shortenAddress(t.buyerAddress)))])]),"secondary"==e.type?a("td",[a("a",{attrs:{href:"https://tzkt.io/"+t.sellerAddress,target:"_blank"}},[e._v(" "+e._s(t.sellerAlias||e.shortenAddress(t.sellerAddress))+" ")])]):e._e(),a("td",[a("a",{attrs:{href:"https://tzkt.io/"+t.operationHash,target:"_blank"}},[e._v(" "+e._s(t.timestamp)+" ")])])])}))],2)])},f=[],y={name:"SalesTable",props:{type:String,data:null},methods:{shortenAddress:function(e){var t=e.substring(0,4),a=e.substring(31);return t+"..."+a}}},v=y,b=Object(l["a"])(v,m,f,!1,null,null,null),g=b.exports,_=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},k=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("footer",[e._v(" Made by "),a("a",{attrs:{href:"https://twitter.com/sam___tsao",target:"_blank"}},[e._v("Sam Tsao")])])}],S=r["a"].extend({name:"SiteFooter"}),x=S,w=Object(l["a"])(x,_,k,!1,null,null,null),j=w.exports,A=(a("b64b"),{methods:{appendQueries:function(e,t){for(var a=Object.keys(t).length,r="",n=0;n<a;n++){var s=0==n?"?":"&",o=Object.keys(t)[n],i=t[o];r+=s+o+"="+i}return e+r}}}),M=(a("2b3d"),a("5319"),a("99af"),a("4d90"),a("25f0"),{methods:{download:function(e,t,a){var r=document.createElement("a");a=a||"application/octet-stream",navigator.msSaveBlob?navigator.msSaveBlob(new Blob([e],{type:a}),t):URL&&"download"in r?(r.href=URL.createObjectURL(new Blob([e],{type:a})),r.setAttribute("download",t),document.body.appendChild(r),r.click(),document.body.removeChild(r)):location.href="data:application/octet-stream,"+encodeURIComponent(e)},addEntry:function(e){var t=[];t.push(e.tokenName),t.push(e.amount);var a=e.buyerAlias;a=a?a.replace(",",""):"No Alias",t.push(a),t.push(e.buyerAddress);var r=new Date(e.timestamp),n=r.getFullYear(),s=r.getMonth()+1,o=r.getDate(),i=r.getHours(),c=r.getMinutes(),d=r.getSeconds(),u="".concat(i.toString().padStart(2,"0"),":").concat(c.toString().padStart(2,"0"),":").concat(d.toString().padStart(2,"0"));return r="".concat(n,"/").concat(s.toString().padStart(2,"0"),"/").concat(o.toString().padStart(2,"0")),t.push(r),t.push(u),t.push(e.timestamp),t.push("https://tzkt.io/"+e.operationHash),t}}}),O={name:"App",mixins:[A,M],components:{SalesTable:g,AddressInput:h,SiteFooter:j},data:function(){return{salesMode:"secondary",addr:"",tzkt:"https://api.tzkt.io/v1/",fxhashMarket:"KT1Xo5B7PNBAeynZPmca4bRh6LQow4og1Zb9",issuer:"KT1AEVuykWeuuFX7QkEAMNtffzwhe1Z98hJS",secondarySales:[],primarySales:[],tokenContract:"KT1KEa8z6vWXDJrVqtMrAeDVzsvxat3kHaCE",bcd:"https://api.better-call.dev/v1/",fxhash:"https://api.fxhash.xyz/graphql"}},watch:{salesMode:function(){this.checkURLQuery()}},created:function(){this.checkURLQuery()},computed:{loading:function(){var e="secondary"==this.salesMode?this.secondarySales:this.primarySales;return e.filter((function(e){return"loading..."===e.tokenName})).length>0?"Data is still loading. Please wait.":"Data has finished loading. Download ready."}},methods:{addressEntered:function(e){this.primarySales=[],this.secondarySales=[],this.addr=e,"secondary"==this.salesMode&&0==this.secondarySales.length&&this.getSecondarySalesTx(),"primary"==this.salesMode&&0==this.primarySales.length&&this.getPrimarySales()},checkURLQuery:function(){this.primarySales=[],this.secondarySales=[];var e=new URLSearchParams(window.location.search);e.get("addr")&&(this.addr=e.get("addr"),"secondary"==this.salesMode&&this.getSecondarySalesTx(),"primary"==this.salesMode&&this.getPrimarySales())},exportCSV:function(){var e=this,t=[],a="secondary"==this.salesMode?"Royalties":"Amount";t.push(["Token Name",a,"Buyer Alias","Buyer Address","Date","Time","Isostring","Transaction"]);var r="secondary"==this.salesMode?this.secondarySales:this.primarySales;r.forEach((function(a){var r=e.addEntry(a);t.push(r)}));var n=t.map((function(e){return e.join(",")})).join("\n");this.download(n,"".concat(this.salesMode,"Sales.csv"),"text/csv;encoding:utf-8")},getPrimarySales:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n,s,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.primarySales=[],t=this.tzkt+"operations/transactions",a=!1,r=0;case 4:if(a){e.next=37;break}return n=this.appendQueries(t,{sender:this.issuer,target:this.addr,status:"applied",limit:100,offset:100*r,"sort.desc":"id"}),e.next=8,fetch(n);case 8:return s=e.sent,e.next=11,s.json();case 11:if(o=e.sent,!(o.length>0)||a){e.next=32;break}i=0;case 14:if(!(i<o.length)){e.next=30;break}return c={},c.amount=o[i].amount/Math.pow(10,6),c.operationHash=o[i].hash,c.timestamp=o[i].timestamp,c.issuerID="",c.objktID="",c.buyerAddress="",c.buyerAlias="",c.tokenName="loading...",this.primarySales.push(c),e.next=27,this.getTransactionData(c);case 27:i++,e.next=14;break;case 30:e.next=33;break;case 32:a=!0;case 33:r++,r>100&&(a=!0),e.next=4;break;case 37:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getTransactionData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.tzkt+"operations/transactions/"+t.operationHash,e.next=3,fetch(a);case 3:return r=e.sent,e.next=6,r.json();case 6:n=e.sent,t.issuerID=n[0].parameter.value.issuer_id,t.buyerAddress=n[0].sender.address,t.buyerAlias=n[0].sender.alias,t.objktID=n[n.length-1].parameter.value.token_id,t.CID="",this.getName(t);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getSecondarySalesTx:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.secondarySales=[],t=this.tzkt+"operations/transactions",a=this.appendQueries(t,{sender:this.fxhashMarket,target:this.addr,"sort.desc":"level",status:"applied",limit:1e3}),e.next=5,fetch(a);case 5:return r=e.sent,e.next=8,r.json();case 8:n=e.sent,s=0;case 10:if(!(s<n.length)){e.next=29;break}return o={},o.amount=n[s].amount/Math.pow(10,6),o.buyerAddress=n[s].initiator.address,o.buyerAlias=n[s].initiator.alias,o.operationHash=n[s].hash,o.timestamp=n[s].timestamp,o.tokenName="loading...",o.objktID="",o.soldPrice="",o.sellerAddress="",o.sellerAlias="",o.CID="",this.secondarySales.push(o),e.next=26,this.assignObjktID(o);case 26:s++,e.next=10;break;case 29:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),assignObjktID:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.tzkt+"operations/transactions/"+t.operationHash,e.next=3,fetch(a);case 3:return r=e.sent,e.next=6,r.json();case 6:n=e.sent,s=n[0].diffs[0].content.value.objkt_id,t.soldPrice=n[0].amount/Math.pow(10,6),t.sellerAddress=n[4].target.address,t.sellerAlias=n[4].target.alias,t.objktID=s,this.getName(t);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getName:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="{objkt(id:".concat(t.objktID,"){name}}"),e.next=3,this.postQuery(a);case 3:r=e.sent,t.tokenName=r.data.objkt.name;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),postQuery:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.fxhash,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"post",body:JSON.stringify({query:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},R=O,D=(a("034f"),Object(l["a"])(R,n,s,!1,null,null,null)),P=D.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(P)}}).$mount("#app")},"85ec":function(e,t,a){}});
//# sourceMappingURL=app.43901b41.js.map